---
pagetitle: "Regulations"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = F, warning = F, message = F)

# Display state links based on: 
# * [regs-state - Google Sheets](https://docs.google.com/spreadsheets/d/1LOrmOM8fLssEGnuC5KuoYhMYl0NZjtdMO1bJUMZ6doc/edit#gid=0)
```

<!-- diagram styling -->
<style>
.main-container {
	width:100%;
	height:auto;
}
.diagram-container {
    /* width:1200px; */
    width: 100%;
    font-family:verdana,arial,helvetica,sans-serif;
    font-size:14px;
    text-align:center;
    margin:auto;
    /* border: 1px solid #000; */
}
/* ===================== */
/* Main elements */
/* ===================== */
.state-content {
    display: none;
}

.state-reference {
    width: 300px;
    height: 200px;
    margin: auto;
    border: 2px dashed #000;
    /* float:left;  */
}
/* ===================== */
/* Connectors and shapes */
/* ===================== */
.vert-line {
	font-size:0;
	width:2px;
	height:30px;
	color:#fff;
	background-color:#000;
	margin:auto;
}
.point-down {
    width:0;
    height:0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-top:8px solid #000;
    margin: 0 auto;
    padding-bottom: 3px;
}
.point-up {
    width:0;
    height:0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-bottom:8px solid #000;
    margin: 0 auto;
    padding-top: 3px;
}
.return-home {
    font-size: 12px;
    margin: 0 auto;
    background-color: #99d1b3;
    display: block;
    box-sizing: border-box;
    border: 1px solid black;
	/* width: min-content; */
	width: 15%;
    padding: 5px;
    font-weight: bold;
    color: black;
    cursor: pointer;
    /* float:left; */
}
.return-home:hover {
    background-color: #75a189;
    display: block;
    box-sizing: border-box;
    border: 1px solid black;
	width: 15%;
    padding: 5px;
}
.return-home:active {
    background-color: #75a189;
    display: block;
    box-sizing: border-box;
    border: 1px solid black;
	width: 15%;
    padding: 5px;
}
/* ===================== */
/* Selecter              */
/* ===================== */
.custom-select {
	display: block;
	font-size: 16px;
	font-family: sans-serif;
	font-weight: 700;
	color: #444;
    text-align: center;
	line-height: 1.3;
	padding: .6em 1.4em .5em .8em;
	width: 30%;
	max-width: 30%;
	box-sizing: border-box;
	margin: 0;
	border: 1px solid #aaa;
	box-shadow: 0 1px 0 1px rgba(0,0,0,.04);
	border-radius: .5em;
	-moz-appearance: none;
	-webkit-appearance: none;
	appearance: none;
	background-color: #fff;
	background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'),
	  linear-gradient(to bottom, #ffffff 0%,#e5e5e5 100%);
	background-repeat: no-repeat, repeat;
	background-position: right .7em top 50%, 0 0;
	background-size: .65em auto, 100%;
    margin: 0 auto;
}
.custom-select::-ms-expand {
	display: none;
}
.custom-select:hover {
	border-color: #888;
}
.custom-select:focus {
	border-color: #aaa;
	box-shadow: 0 0 1px 3px rgba(59, 153, 252, .7);
	box-shadow: 0 0 0 3px rgba(59, 153, 252, .7) -moz-mac-focusring;
	color: #222;
	outline: none;
}
.custom-select option {
	font-weight:normal;
}
/* Disabled styles */
.custom-select:disabled, .custom-select[aria-disabled=true] {
	color: graytext;
	background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22graytext%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'),
	linear-gradient(to bottom, #ffffff 0%,#e5e5e5 100%);
}
.custom-select:disabled:hover, .custom-select[aria-disabled=true] {
	border-color: #aaa;
}
</style>
<!-- diagram container -->
<h2>State-led Processes</h2>
  <div class="diagram-container">
  <!-- node connectors -->
  <div class="return-home" onclick="location.href='./regs.html';"><i class="fas fa-backward"></i><br>Main Diagram</div>
  <!-- <div class="point-up"></div> -->
  <!-- <div class="vert-line" style="height:60px;"></div> -->
  <div style="height:45px;"></div>
  <!-- <div class="point-down"></div> -->
  <!-- state selection -->
  <div id="state-decision">
  <select class="custom-select" id="stateSelect">
  <option value="select-none" selected>Select State:</option>
  
```{r, results='asis'}
library(librarian)
shelf(dplyr, glue, purrr, readr, stringr, tidyr)

g_key   <- "1LOrmOM8fLssEGnuC5KuoYhMYl0NZjtdMO1bJUMZ6doc"
g_sheet <- "1"
g_url <- glue("https://docs.google.com/spreadsheets/d/{g_key}/gviz/tq?tqx=out:csv&sheet={g_sheet}")

d <- read_csv(g_url) %>% 
  nest_by(state) %>% 
  mutate(
    state_code = map_chr(
      state,
      function(s){
        # s = "Rhode Island"
        str_to_lower(s) %>% 
          str_replace_all(" ", "-") }),
    state_html = glue('<option value="{state_code}">{state}</option>'))

d %>% 
  pull(state_html) %>% 
  paste(collapse = "\n") %>% 
  cat()
```

  </select>
  </div>

  <!-- dynamic state selection -->
  <div id="state-selection">
  <!-- <div id="state-selection" style="display: none;"> -->
  <div style="height:45px;"></div>
  
  <div class="state-content" id="select-none"></div>

```{r, results='asis'}
d2 <- d %>% 
  unnest(data) %>% 
  mutate(
    item = ifelse(
      is.na(section_link),
      glue("Hello {state}"),
      glue('<a href="{section_link}" target = "_blank">{section_name}</a><br>'))) %>% 
  group_by(state, state_code) %>% 
  summarize(
    items_html = paste(item, collapse = "\n")) %>% 
  mutate(
    state_html = glue(
      '<div class="state-content" id="{state_code}">
       {items_html}
       </div>'))

d2$state_html %>% 
  paste(collapse = "\n") %>% 
  cat()
```

<!--
  <div class="state-content" id="alaska">
  <a href="https://openei.org/wiki/MHK-env/Regulations/Alaska#CZMA_Consistency_Review">CZMA Consistency Review</a><br>
  <a href="https://openei.org/wiki/MHK-env/Regulations/Alaska#Water_Quality_Review">Water Quality Review</a><br>
  <a href="https://openei.org/wiki/MHK-env/Regulations/Alaska#Land_Use_Permit">Land Use Permit</a><br>
  <a href="https://openei.org/wiki/MHK-env/Regulations/Alaska#Right_of_Way_Review">Right of Way Review</a><br>
  <a href="https://openei.org/wiki/MHK-env/Regulations/Alaska#Tidelands_Lease_Review">Tidelands Lease Review</a><br>
  <a href="https://openei.org/wiki/MHK-env/Regulations/Alaska#Special_Area_Review">Special Area Review</a><br>
  <a href="https://openei.org/wiki/MHK-env/Regulations/Alaska#Fish_Habitat_Review">Fish Habitat Review</a>
  </div>
  <div class="state-content" id="california">
  <p>Hello california</p>
  </div>
  <div class="state-content" id="florida">
  <p>Hello florida</p>
  </div>
  <div class="state-content" id="hawaii">
  <p>Hello hawaii</p>
  </div>
  <div class="state-content" id="maine">
  <p>Hello maine</p>
  </div>
  <div class="state-content" id="massachusetts">
  <p>Hello massachusetts</p>
  </div>
  <div class="state-content" id="new-york">
  <p>Hello new york</p>
  </div>
  <div class="state-content" id="oregon">
  <p>Hello oregon</p>
  </div>
  <div class="state-content" id="rhode-island">
  <p>Hello rhode island</p>
  </div>
  <div class="state-content" id="washington">
  <p>Hello washington</p>
  </div>

-->

  </div>
</div>


<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>


<!-- get user option select -->
<script>
select = document.getElementById("stateSelect");
select.onchange = function() {
    var selected = document.getElementById("stateSelect");
    var index = selected.selectedIndex;
    var state = document.getElementsByTagName("option")[index].value;

    var x = document.getElementsByClassName("state-content");
    var i;
    for (i=0; i<x.length; i++) {
        x[i].style.display = "none";
    }

    var y = document.getElementById(state).id;
    var z = document.getElementById(y);
    z.style.display = "block";
}
</script>

